var AJAXIFY_SITE=false;$(".main nav ul li a").click(function(){$(".main nav .current").removeClass("current");if(AJAXIFY_SITE){$(this).addClass("current")}setTimeout("$('.watermark').css('top', '30px')",1000)});$(".subheader.features ul li a").click(function(){$(".main nav .current").removeClass("current");setTimeout("$('.watermark').css('top', '30px')",1000)});function finishPanelLoad(b,a){if(b.hasClass("next")){b.removeClass("next");b.prev().addClass("previous")}else{if(b.hasClass("previous")){b.removeClass("previous");b.next().addClass("next")}}$(".page").removeClass("current");b.addClass("current");$.scrollTo(b,600,{queue:true,offset:{top:-60,left:0},onAfter:function(){$(".subheader.features").slideUp("fast",function(){if(a.popped!="popped"){state.push(a)}route.init(page)})}})}$(document).keydown(function(d){var f="";var c={"37":"previous","39":"next"}[d.keyCode];var b=$(".page.current");if(b.parent().hasClass("flexbox-container")){var a=b.attr("id").replace(/feature-/,"");if(c=="previous"){f=b.prev().attr("id").replace(/features-/,"");b.prev().addClass("previous")}if(c=="next"){f=b.next().attr("id").replace(/features-/,"");b.next().addClass("next")}if(f){b.one("webkitTransitionEnd",function(g){$(".page").removeClass("previous");$(".page").removeClass("next")});loadContent($("nav.paginator ul."+f+" a."+c)[0])}}if(d.keyCode==27){$("#search_hide, #features_hide").click();$(".outline_nav_toggle").removeClass("activated").find("nav.outline").fadeOut("fast")}});if(AJAXIFY_SITE){$("a").click(function(){if($(this).attr("target")){return true}if(!Modernizr.history){return true}loadContent(this);return false})}function loadContent(c,b){window.page=c.pathname.replace(/\/\w{2,3}\//gi,"").replace(/\/([A-Za-z]+)/gi,"-$1").replace(/(\/$)|(^-)/g,"").split("#")[0];window.pagePanel=$(".page#"+page);var a=c.href;var d=a.split("#")[1];var f={href:a,hash:d,popped:b,title:page[0].toUpperCase()+page.substring(1)};if(page==""){location.href="/";return false}$("body").attr("data-href",page);if(d){var e=pagePanel.find("."+d);if(e.length){finishPanelLoad(e,f)}return false}if(pagePanel.hasClass("loaded")){finishPanelLoad(pagePanel,f)}else{pagePanel.addClass("loaded").load(a+" [data-import-html]",function(){finishPanelLoad(pagePanel,f)})}}$(".outline_nav_toggle").click(function(a){$(this).toggleClass("activated");$(this).find("nav.outline").fadeToggle("fast")});$("nav.features_outline a.section_title").click(function(a){if($(this).parent("li").hasClass("current")){$(this).parent("li").removeClass("current");$(this).siblings("ul").slideUp("fast")}else{$("nav.features_outline li").removeClass("current");$("nav.features_outline a.section_title").siblings("ul").slideUp("fast");$(this).parent("li").addClass("current");$(this).siblings("ul").slideDown("fast")}a.stopPropagation()});window.route={common:function(){gapi.plusone.go(pagePanel.find(".plusone").get(0));twttr.widgets.load()},features:function(){window.loadFeaturePanels&&loadFeaturePanels()},init:function(b){var a=route[b.split("-")[0]],c=route[b];route.fire(route.common);route.fire(a);if(c!=a){route.fire(c)}},fire:function(a){if(typeof a=="function"){a.call(route)}},onload:function(){var b=$(".page.current"),a=b[0].id;if(a=="home"||a=="profiles"){return false}$("[id="+a+"]").eq(1).replaceWith(b);route.fire(route.features)}};window.state={push:function(a){if(!Modernizr.history){return}history.pushState(a,"",a.href);document.title="HTML5 Rocks - "+a.title},popstate:function(b){if(!(b&&b.state)){return}var a=document.createElement("a");a.href=b.state.href;document.title="HTML5 Rocks - "+b.state.title;loadContent(a,"popped")},handleEvent:function(a){state[a.type].call(state,a)}};if(AJAXIFY_SITE){window.addEventListener("popstate",state,false)}window.addEventListener("DOMContentLoaded",route.onload,false);